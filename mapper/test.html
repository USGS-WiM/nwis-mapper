<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
		<title>Waterservices IE11 Test</title>	
		<script type="text/javascript">var dojoConfig = {parseOnLoad: true};</script>
		<script src="https://js.arcgis.com/3.9/"></script>
		
		<script type="text/javascript">

			var url = "http://staging.waterdata.usgs.gov/nwis/inventory?format=sitefile_output&sitefile_output_format=xml&column_name=site_no&column_name=dec_long_va&column_name=dec_lat_va&column_name=site_active&column_name=site_tp_cd&column_name=station_nm&site_no=01312000"

			var siteFileRequest = {
			  url: url,
			  handleAs: "xml",
			  headers: {
				"X-Requested-With": null,
				'Content-Type': 'text/plain'
			  },
			  load: function(xml, ioargs) {
				console.log('here')
				console.log("success:",xml)	
			  },
			  error: function(error, ioargs) {
					console.log("ERROR")
					document.getElementById("status").innerHTML = error.description;
					console.error(error)
			  },
			  handle: function() {
					var loading = document.getElementById("loading");
					loading.style.display = "none";
			  }
			}

			function getSites() {
				var loading = document.getElementById("loading")
				loading.style.display = "block";
				// AJAX call to fetch sites
				var deferred = dojo.xhrGet(siteFileRequest);
			}
			</script>	
	</head>
	<body>
		<h3>Waterservices IE11 test</h3>
		<input id="clickMe" type="button" value="Get Sites" onclick="getSites();" />
		<span id="loading" style="display:none;">loading...</span>
		<p id="status"></p>
		<ul id="siteList"></ul>
	</body>
</html>